{"version":3,"sources":["webpack:///webpack/bootstrap 972eae7113b26f2e3d64","webpack:///./src/gameloop.js","webpack:///./src/gameloop/GameLoop.js","webpack:///./src/gameloop/Exceptions.js","webpack:///./src/logo.js"],"names":["console","log","window","GameLoop","canvas","document","readyState","initialize","prevORSC","onreadystatechange","ctx","initialized","drawContext","initEvents","prevUpdate","prevDraw","updateables","drawables","targetRate","getElementById","getContext","w","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","f","setTimeOut","_loop","_fireInitEvents","objectable","draw","addDrawable","update","addUpdateable","updateable","push","length","drawable","item","forEach","object","i","splice","timestamp","_update","_draw","timeDiff","save","restore","event","call","GameException","message","name","logo"],"mappings":"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","file":"gameloop.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 972eae7113b26f2e3d64","import GameLoop from \"./gameloop/GameLoop\";\nimport logo from \"./logo\";\n\nconsole.log(logo);\n\nwindow.GameLoop = new GameLoop();\n\n// TODO make this something else\nconst canvas = \"game-canvas\";\n\nif (document.readyState === \"complete\") {\n  window.GameLoop.initialize(canvas);\n} else {\n  const prevORSC = document.onreadystatechange;  //save previous event\n  document.onreadystatechange = function () {\n\n    if (typeof(prevORSC) === \"function\"){\n      prevORSC();\n    }\n\n    if (document.readyState === \"complete\") {\n      window.GameLoop.initialize(canvas);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop.js","import { GameException } from \"./Exceptions\";\n\n/**\n * GameLoop Class\n *\n * TODO: implement window-visibility loss detection\n * http://stackoverflow.com/a/1060034/1004027\n *\n * @param canvas {string} id of <canvas> element | {HTMLCanvasElement} to draw on.\n * @returns {GameLoop}\n * @constructor\n */\nexport default class GameLoop {\n  constructor (canvas) {\n    this.canvas = canvas;\n    this.ctx = null;\n    this.initialized = false;\n    this.drawContext = null;\n    this.initialized = false;\n    this.initEvents = [];\n    this.prevUpdate = 0;\n    this.prevDraw = 0;\n    this.updateables = [];\n    this.drawables = [];\n    this.targetRate = 33;\n  }\n\n  /**\n   *\n   * @param canvas\n   */\n  initialize (canvas) {\n    if (!this.canvas) {\n      throw new GameException(\"Missing canvas\");\n    }\n\n    // skip setting if context is already known.\n    if (this.drawContext === null){\n      if (typeof(this.canvas) === \"string\"){\n        this.canvas = document.getElementById(canvas);\n      }\n      if (this.canvas.getContext){\n        this.ctx = this.canvas.getContext(\"2d\");\n      }\n    }\n\n    //unify browser functions\n    (function(w) {\n      w.requestAnimationFrame = window.requestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function(f){ return w.setTimeOut(f, 33);};  // IE9?\n    })(window);\n\n    // kick off main loop\n    window.requestAnimationFrame(this._loop);\n\n    this.initialized = true;\n    this._fireInitEvents();\n  }\n\n  /**\n   * Add and item to one or both of the update and draw lists\n   *\n   * @param objectable {Object} with function member \"update\" or \"draw\" or both\n   */\n  addItem (objectable) {\n    if (objectable){\n      if (typeof(objectable.draw) === \"function\"){\n        this.addDrawable(objectable);\n      }\n      if (typeof(objectable.update) === \"function\"){\n        this.addUpdateable(objectable);\n      }\n    }\n  }\n\n  /**\n   * Add an item to the list of items in the update list\n   *\n   * @param updateable {Object} with function member \"update\"\n   * @returns {Number} New count of updateable components\n   * @throws {GameException} if object does not contain \"update\" function\n   */\n  addUpdateable (updateable) {\n    if (updateable && updateable.update && typeof(updateable.update) === \"function\") {\n      this.updateables.push(updateable);\n    } else {\n      throw new GameException(\"invalid updateable object added.\");\n    }\n    //crude identifier, invalidated by each removal\n    return this.updateables.length;\n  }\n\n  /**\n   * Add an item to the list of items in the draw list\n   *\n   * @param drawable {Object} with function member \"draw\"\n   * @returns {Number} New count of drawable components\n   * @throws {GameException} if object does not contain \"draw\" function\n   */\n  addDrawable (drawable) {\n    if (drawable && drawable.draw && typeof(drawable.draw) === \"function\"){\n      this.drawables.push(drawable);\n    } else {\n      throw new GameException(\"Invalid drawable object added.\");\n    }\n    return this.drawables.length;\n  }\n\n  /**\n   *\n   * @param item\n   * @returns {boolean}\n   */\n  remove (item) {\n    this.drawables.forEach((object, i) => {\n      if (object === item){\n        this.drawables.splice(i, 1);\n        return true;\n      }\n    });\n\n    this.updateables.forEach((object, i) => {\n      if (object === item){\n        this.updateables.splice(i, 1);\n        return true;\n      }\n    });\n\n    return false;\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _loop (timestamp) {\n    if (this.initialized){\n      this._update(timestamp);\n      this._draw(timestamp);\n    }\n    requestAnimationFrame(this._loop);\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _update(timestamp) {\n    let timeDiff = timestamp - this.prevUpdate;\n    this.prevUpdate = timestamp;\n\n    timeDiff = timeDiff % (2 * this.targetRate);\n\n    this.updateables.forEach((object) => {\n      object.update(this.drawContext, timeDiff, timestamp);\n    });\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _draw (timestamp) {\n    const timeDiff = timestamp - this.prevDraw;\n    this.prevDraw = timestamp;\n    this.drawables.forEach((object) => {\n      if (typeof(this.drawContext.save) === \"function\"){\n        this.drawContext.save();\n      }\n      object.draw(this.drawContext, timeDiff, timestamp);\n      if (typeof(this.drawContext.restore) === \"function\") {\n        this.drawContext.restore();\n      }\n    });\n  }\n\n  /**\n   *\n   * @param f\n   * @private\n   */\n  _onInit (f) {\n    this.initEvents.push(f);\n  }\n\n  /**\n   *\n   * @private\n   */\n  _fireInitEvents () {\n    this.initEvents.forEach((event) => {\n      event.call(this);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/GameLoop.js","export function GameException(message) {\n  this.message = message;\n  this.name = \"GameException\";\n}\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/Exceptions.js","/**\n * http://www.network-science.de/ascii/\n *\n * Gothic\n */\n\nexport const logo = `\n                             .__                        \n   _________    _____   ____ |  |   ____   ____ ______  \n  / ___\\\\__  \\\\  /     \\\\_/ __ \\\\|  |  /  _ \\\\ /  _ \\\\\\\\____ \\\\ \n / /_/  > __ \\\\|  Y Y  \\\\  ___/|  |_(  <_> |  <_> )  |_> >\n \\\\___  (____  /__|_|  /\\\\___  >____/\\\\____/ \\\\____/|   __/ \n/_____/     \\\\/      \\\\/     \\\\/                   |__|\\n`;\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/logo.js"],"sourceRoot":""}