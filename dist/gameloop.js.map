{"version":3,"sources":["webpack:///webpack/bootstrap ff34211c043a903dcac7","webpack:///./src/gameloop/Exceptions.js","webpack:///./src/gameloop/base/sprites/Sprite.js","webpack:///./src/gameloop/base/sprites/AnimatedSprite.js","webpack:///./src/gameloop/base/Frame.js","webpack:///./src/gameloop/base/RegistryItem.js","webpack:///./src/gameloop/base/audio/AudioUnit.js","webpack:///./src/gameloop/Constants.js","webpack:///./src/gameloop/components/sample/Bullet.js","webpack:///./src/gameloop.js","webpack:///./src/gameloop/GameLoop.js","webpack:///./src/gameloop/util/OnReady.js","webpack:///./src/gameloop/components/Clear.js","webpack:///./src/gameloop/components/sample/StarField.js","webpack:///./src/gameloop/base/Manager.js","webpack:///./src/gameloop/base/audio/GLAudio.js","webpack:///./src/gameloop/base/audio/SoundTrack.js","webpack:///./src/gameloop/components/sample/Shooter.js","webpack:///./src/logo.js"],"names":["GameException","message","name","Sprite","img","imageElement","offset","x","y","position","rotation","Math","PI","width","height","setImageElement","key","asset","manager","getAsset","sprite","dataset","hasOwnProperty","obj","val","r","imageId","document","addEventListener","getElementById","context","p","getPosition","getOffsetPixels","save","translate","rotate","getRotation","drawImage","getImageElement","getWidth","getHeight","restore","AnimatedSprite","frames","frame","push","forEach","f","data","origin","size","setFrames","JSON","parse","atob","glFrames","getFrame","draw","Frame","stringify","RegistryItem","state","loading","addOnLoad","itemLoad","awaiting","callback","call","AudioUnit","glaudio","node","gain","type","AudioNode","currentVolume","playing","connect","value","music","sounds","vol","max","min","t","at","setValueAtTime","exponentialRampToValueAtTime","toLowerCase","setVolume","MIN_VOLUME","MAX_VOLUME","Bullet","active","velocity","console","log","window","Clear","StarField","GLAudio","SoundTrack","Shooter","GameLoop","canvas","ctx","initialized","drawContext","initEvents","prevUpdate","prevDraw","updateables","drawables","targetRate","w","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","setTimeOut","getContext","_resizeCanvas","bind","_loop","_fireInitEvents","objectable","addDrawable","update","addUpdateable","updateable","length","drawable","item","object","i","splice","timestamp","_update","_draw","timeDiff","event","innerWidth","innerHeight","onReady","cb","readyState","arguments","prevORSC","onreadystatechange","color","setTransform","clearRect","fillStyle","fillRect","center","bounds","particles","particleCount","clearing","spawnRadius","particle","random","Manager","registry","assets","components","querySelectorAll","addAsset","glAsset","timediff","component","AudioContext","master","createGain","destination","currentTime","options","unit","set","result","createOscillator","_makeUnit","start","newMedia","media","cloneNode","createMediaElementSource","makeUnit","on","play","off","pause","create","createBufferSource","buffer","progress","startTime","onend","stop","newnode","onended","nowPlaying","activeUnit","track","title","PERIOD","speed","input","getX","getY","isShooting","shotPeriod","bulletList","shotTimer","bullet","readyLoadImageId","updatePosition","updateBullets","v","isActive","next","getNextBullet","shoot","logo"],"mappings":"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","file":"gameloop.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ff34211c043a903dcac7","export function GameException(message) {\n  this.message = message;\n  this.name = \"GameException\";\n}\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/Exceptions.js","/* global manager */\n\nimport { GameException } from \"../../Exceptions\";\nimport AnimatedSprite from \"./AnimatedSprite\";\n\nexport default class Sprite {\n\n  constructor (img) {\n    this.imageElement = null;\n    this.offset = {\n      x: 0.5,\n      y: 0.5\n    };\n    this.position = {\n      x: 0,\n      y: 0\n    };\n    this.rotation = Math.PI;\n    this.width = null;\n    this.height = null;\n\n    if (img && (img !== null)){\n      this.setImageElement(img);\n    }\n  }\n\n  /**\n   * fromAsset\n   *\n   * @param key\n   * @returns {*}\n   */\n  fromAsset (key) {\n    const asset = manager.getAsset(key);\n    let sprite = null;\n    if (asset.dataset.hasOwnProperty(\"glFrames\")){\n      sprite = new AnimatedSprite();\n    } else {\n      sprite = new Sprite();\n    }\n    sprite.setImageElement(manager.getAsset(key));\n    return sprite;\n  }\n\n  /**\n   * getOffset\n   *\n   * @returns {*}\n   */\n  getOffset () {\n    return this.offset;\n  }\n\n  /**\n   *\n   * @param offset\n   */\n  setOffset (offset) {\n    if (typeof(offset.x) !== \"undefined\" && typeof(offset.y) !== \"undefined\") {\n      this.offset = offset;\n    } else {\n      throw new GameException(\"Invalid offset,\", offset);\n    }\n  }\n\n  /**\n   * getPosition\n   *\n   * @returns {*|position|{x, y}}\n   */\n  getPosition () {\n    return this.position;\n  }\n\n  /**\n   * setPosition\n   *\n   * @param obj\n   */\n  setPosition (obj) {\n    if (typeof(obj.x) !== \"undefined\" && typeof(obj.y) !== \"undefined\"){\n      this.position = obj;\n    } else {\n      throw new GameException(\"Invalid position settings\");\n    }\n  }\n\n  /**\n   * getImageElement\n   *\n   * @returns {null|*}\n   */\n  getImageElement () {\n    return this.imageElement;\n  }\n\n  /**\n   * setImageElement\n   *\n   * @param val\n   */\n  setImageElement (val) {\n    this.imageElement = val;\n    this.width = val.width;\n    this.height = val.height;\n  }\n\n  /**\n   * getOffsetPixels\n   *\n   * @returns {{x: number, y: number}}\n   */\n  getOffsetPixels () {\n    return {\n      x: -1 * this.offset.x * this.width,\n      y: -1 * this.offset.y * this.height\n    };\n  }\n\n  /**\n   * getRotation\n   *\n   * @returns {*}\n   */\n  getRotation () {\n    return this.rotation;\n  }\n\n  /**\n   * setRotation\n   *\n   * @param r\n   */\n  setRotation (r) {\n    this.rotation = r;\n  }\n\n  /**\n   * readyLoadImageId\n   *\n   * @param imageId\n   */\n  readyLoadImageId (imageId) {\n    document.addEventListener(\"readystatechange\", () => {\n      this.setImageElement(document.getElementById(imageId));\n    });\n  }\n\n\n  /**\n   * draw\n   *\n   * @param context\n   */\n  draw (context) {\n    const p = this.getPosition();\n    const offset = this.getOffsetPixels();\n\n    context.save();\n    context.translate(p.x, p.y);\n    context.rotate(this.getRotation());\n\n    context.drawImage(\n      this.getImageElement(),\n      offset.x,\n      offset.y,\n      this.getWidth(),\n      this.getHeight()\n    );\n\n    context.restore();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/sprites/Sprite.js","import Frame from \"../Frame\";\nimport Sprite from \"./Sprite\";\n\nexport default class AnimatedSprite extends Sprite {\n\n  constructor () {\n    super();\n\n    this.frames = [];\n    const frame = new Frame();\n    frame.img = this.getImageElement();\n    this.frames.push(frame);\n    this.frame = 0;\n  }\n\n  /**\n   * setFrames\n   *\n   * @param frames\n   */\n  setFrames (frames) {\n    if (frames.hasOwnProperty(\"length\")) {\n      this.frames = [];\n\n      frames.forEach((f) => {\n        this.frames.push(( (data) => {\n          const frame = new Frame();\n          frame.origin = {x: data[0], y: data[1]};\n          frame.offset = {x: data[2], y: data[3]};\n          frame.size = {x: data[4], y: data[5]};\n          return frame;\n        })(f));\n      });\n    }\n  }\n\n  /**\n   * setImageElement\n   *\n   * @param img\n   */\n  setImageElement (img) {\n    super.setImageElement(img);\n    if (img.dataset.hasOwnProperty(\"glFrames\"))  {\n      this.setFrames(JSON.parse(atob(img.dataset.glFrames)));\n    }\n    else {\n      this.setFrames([[\n        0, 0,\n        -1/2 * this.getWidth(), -1/2 * this.getHeight(),\n        this.getWidth(), this.getHeight()\n      ]]);\n    }\n    this.frame = 0;\n  }\n\n  /**\n   * getFrame\n   *\n   * @returns {*}\n   */\n  getFrame () {\n    return this.frames[this.frame];\n  }\n\n  /**\n   * draw\n   *\n   * @param context\n   */\n  draw (context) {\n    const p = this.getPosition();\n\n    context.save();\n    context.translate(p.x, p.y);\n    context.rotate(this.getRotation());\n    this.getFrame().draw(context, this.getImageElement());\n    context.restore();\n  }\n\n  /**\n   * getOffsetPixels\n   *\n   * @returns {*}\n   */\n  getOffsetPixels () {\n    return this.getFrame().offset;\n  }\n\n  /**\n   * getWidth\n   *\n   * @returns {*|number}\n   */\n  getWidth () {\n    return this.getFrame().size.x;\n  }\n\n  /**\n   * getHeight\n   *\n   * @returns {*|number}\n   */\n  getHeight () {\n    return this.getFrame().size.y;\n  }\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/sprites/AnimatedSprite.js","export default class Frame {\n\n  constructor() {\n    this.origin = {\n      x: 0,\n      y: 0\n    };\n    this.offset = {\n      x: -24,\n      y: -24\n    };\n    this.size = {\n      x: 48,\n      y: 48\n    };\n  }\n\n  /**\n   * draw\n   *\n   * @param context\n   * @param img\n   */\n  draw (context, img) {\n    if (img === null){\n      return;\n    }\n\n    context.drawImage(\n      img,\n      this.origin.x,\n      this.origin.y,\n      this.size.x,\n      this.size.y,\n      this.offset.x,\n      this.offset.y,\n      this.size.x,\n      this.size.y\n    );\n  }\n\n  /**\n   * toJSON\n   */\n  toJSON () {\n    return JSON.stringify([\n      this.origin.x, this.origin.y,\n      this.offset.x, this.offset.y,\n      this.size.x, this.size.y\n    ]);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/Frame.js","export default class RegistryItem {\n  constructor (key, obj) {\n    this.key = key;\n    this.obj = obj;\n    this.state = \"ready\";\n    if (obj.loading && (typeof(obj.addOnLoad) === \"function\")) {\n      this.state = \"loading\";\n      obj.addOnLoad(this.itemLoad(), this);\n    }\n  }\n\n  itemLoad (awaiting) {\n    if (awaiting.hasOwnProperty(this.key)){\n      awaiting[this.key].callback.call(awaiting[this.key].context, this.obj);\n      delete awaiting[this.key];\n    }\n    this.state = \"ready\";\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/RegistryItem.js","import { MIN_VOLUME, MAX_VOLUME } from \"../../Constants\";\nimport { GameException } from \"../../Exceptions\";\n\nexport default class AudioUnit {\n  constructor (glaudio, node, gain, type) {\n    if (!(node instanceof AudioNode) || !(gain instanceof AudioNode)) {\n      throw new GameException(\"Invalid arguments, AudioNodes required.\");\n    }\n\n    this.currentVolume = 0.3;\n    this.playing = false;\n    this.node = node;\n    this.gain = gain;\n\n    this.glaudio = glaudio;\n\n    this.node.connect(gain);\n    this.gain.gain.value = MIN_VOLUME;\n\n    if (type === \"music\") {\n      this.gain.connect(this.glaudio.music);\n    } else {\n      this.gain.connect(this.glaudio.sounds);\n    }\n  }\n\n  setVolume (vol, save) {\n    if (typeof(save) === \"undefined\"){\n      save = true;\n    }\n\n    vol = Math.max(vol, MIN_VOLUME);\n    vol = Math.min(vol, MAX_VOLUME);\n\n    if (save) {\n      this.currentVolume = vol;\n    }\n\n    if (this.playing) {\n      // a ramp's time spans from the previously scheduled event,\n      // which could be any time, so schedule two for any change.\n      const t = this.glaudio.at();\n      this.gain.gain.setValueAtTime(this.gain.gain.value, t);\n      this.gain.gain.exponentialRampToValueAtTime(vol, t + 0.032);\n    }\n  }\n\n  set (name, value){\n    if (name.toLowerCase() === \"volume\"){\n      this.setVolume(value);\n    }\n    else if (this.node.hasOwnProperty(name)) {\n      this.node[name].value = value;\n    }\n  }\n\n  on () {\n    this.playing = true;\n    this.setVolume(this.currentVolume);\n  }\n\n  off () {\n    this.setVolume(0, false);\n    this.playing = false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/audio/AudioUnit.js","export const MIN_VOLUME = 0.001;\nexport const MAX_VOLUME = 1.5;\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/Constants.js","import Sprite from \"../../base/sprites/Sprite\";\n\nexport default class Bullet extends Sprite {\n  constructor () {\n    super();\n    this.active = false;\n    this.velocity = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  shoot (position, velocity) {\n    this.active = true;\n    this.position = position;\n    this.velocity = velocity;\n  }\n\n  update () {\n    this.position.x += this.velocity.x;\n    this.position.y += this.velocity.y;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/components/sample/Bullet.js","import GameLoop from \"./gameloop/GameLoop\";\nimport Clear from \"./gameloop/components/Clear\"\nimport StarField from \"./gameloop/components/sample/StarField\";\nimport AnimatedSprite from \"./gameloop/base/sprites/AnimatedSprite\"\nimport Frame from \"./gameloop/base/Frame\";\nimport Sprite from \"./gameloop/base/sprites/Sprite\";\nimport Manager from \"./gameloop/base/Manager\";\nimport RegistryItem from \"./gameloop/base/RegistryItem\";\nimport AudioUnit from \"./gameloop/base/audio/AudioUnit\";\nimport GLAudio from \"./gameloop/base/audio/GLAudio\"\nimport SoundTrack from \"./gameloop/base/audio/SoundTrack\"\nimport Bullet from \"./gameloop/components/sample/Bullet\";\nimport Shooter from \"./gameloop/components/sample/Shooter\";\n\nimport logo from \"./logo\";\n\nconsole.log(logo);\n\n/**\n * We currently globalize everything by attaching to window\n *\n * Is there a better way?\n*/\n\n// Globalize classes\nwindow.Clear = Clear;\nwindow.StarField = StarField;\nwindow.AnimatedSprite = AnimatedSprite;\nwindow.Sprite = Sprite;\nwindow.Frame = Frame;\nwindow.RegistryItem = RegistryItem;\nwindow.AudioUnit = AudioUnit;\nwindow.GLAudio = GLAudio;\nwindow.SoundTrack = SoundTrack;\nwindow.Bullet = Bullet;\nwindow.Shooter = Shooter;\n\n// Globalize instances\nwindow.manager = new Manager();\nwindow.GameLoop = new GameLoop();\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop.js","import { GameException } from \"./Exceptions\";\nimport { onReady } from \"./util/OnReady\";\n\n/**\n * GameLoop Class\n *\n * TODO: implement window-visibility loss detection\n * http://stackoverflow.com/a/1060034/1004027\n *\n * @param canvas {string} id of <canvas> element | {HTMLCanvasElement} to draw on.\n * @returns {GameLoop}\n * @constructor\n */\nexport default class GameLoop {\n  constructor (canvas) {\n    this.canvas = canvas;\n    this.ctx = null;\n    this.initialized = false;\n    this.drawContext = null;\n    this.initialized = false;\n    this.initEvents = [];\n    this.prevUpdate = 0;\n    this.prevDraw = 0;\n    this.updateables = [];\n    this.drawables = [];\n    this.targetRate = 33;\n  }\n\n  /**\n   *\n   * @param canvas\n   */\n  initialize (canvas) {\n    //unify browser functions\n    (function(w) {\n      w.requestAnimationFrame = window.requestAnimationFrame ||\n        window.mozRequestAnimationFrame ||\n        window.webkitRequestAnimationFrame ||\n        window.msRequestAnimationFrame ||\n        function(f){ return w.setTimeOut(f, 33);};  // IE9?\n    })(window);\n\n    onReady( () => {\n      if (!canvas) {\n        throw new GameException(\"Missing canvas\");\n      }\n\n      // skip setting if context is already known.\n      if (this.drawContext === null){\n        if (typeof(canvas) === \"string\"){\n          this.canvas = document.getElementById(canvas);\n        }\n        if (this.canvas.getContext){\n          this.ctx = this.canvas.getContext(\"2d\");\n          // Why do we need drawContext?\n          this.drawContext = this.ctx;\n        }\n      }\n\n      window.addEventListener(\"resize\", this._resizeCanvas.bind(this), false);\n      this._resizeCanvas();\n\n      // kick off main loop\n      window.requestAnimationFrame(this._loop.bind(this));\n\n      this.initialized = true;\n      this._fireInitEvents();\n    });\n  }\n\n  /**\n   * Add and item to one or both of the update and draw lists\n   *\n   * @param objectable {Object} with function member \"update\" or \"draw\" or both\n   */\n  addItem (objectable) {\n    if (objectable){\n      if (typeof(objectable.draw) === \"function\"){\n        this.addDrawable(objectable);\n      }\n      if (typeof(objectable.update) === \"function\"){\n        this.addUpdateable(objectable);\n      }\n    }\n  }\n\n  /**\n   * Add an item to the list of items in the update list\n   *\n   * @param updateable {Object} with function member \"update\"\n   * @returns {Number} New count of updateable components\n   * @throws {GameException} if object does not contain \"update\" function\n   */\n  addUpdateable (updateable) {\n    if (updateable && updateable.update && typeof(updateable.update) === \"function\") {\n      this.updateables.push(updateable);\n    } else {\n      throw new GameException(\"invalid updateable object added.\");\n    }\n    //crude identifier, invalidated by each removal\n    return this.updateables.length;\n  }\n\n  /**\n   * Add an item to the list of items in the draw list\n   *\n   * @param drawable {Object} with function member \"draw\"\n   * @returns {Number} New count of drawable components\n   * @throws {GameException} if object does not contain \"draw\" function\n   */\n  addDrawable (drawable) {\n    if (drawable && drawable.draw && typeof(drawable.draw) === \"function\"){\n      this.drawables.push(drawable);\n    } else {\n      throw new GameException(\"Invalid drawable object added.\");\n    }\n    return this.drawables.length;\n  }\n\n  /**\n   *\n   * @param item\n   * @returns {boolean}\n   */\n  remove (item) {\n    this.drawables.forEach((object, i) => {\n      if (object === item){\n        this.drawables.splice(i, 1);\n        return true;\n      }\n    });\n\n    this.updateables.forEach((object, i) => {\n      if (object === item){\n        this.updateables.splice(i, 1);\n        return true;\n      }\n    });\n\n    return false;\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _loop (timestamp) {\n    if (this.initialized){\n      this._update(timestamp);\n      this._draw(timestamp);\n    }\n    requestAnimationFrame(this._loop.bind(this));\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _update(timestamp) {\n    let timeDiff = timestamp - this.prevUpdate;\n    this.prevUpdate = timestamp;\n\n    timeDiff = timeDiff % (2 * this.targetRate);\n\n    this.updateables.forEach((object) => {\n      object.update(this.drawContext, timeDiff, timestamp);\n    });\n  }\n\n  /**\n   *\n   * @param timestamp\n   * @private\n   */\n  _draw (timestamp) {\n    const timeDiff = timestamp - this.prevDraw;\n    this.prevDraw = timestamp;\n    this.drawables.forEach((object) => {\n      if (typeof(this.drawContext.save) === \"function\"){\n        this.drawContext.save();\n      }\n      object.draw(this.drawContext, timeDiff, timestamp);\n      if (typeof(this.drawContext.restore) === \"function\") {\n        this.drawContext.restore();\n      }\n    });\n  }\n\n  /**\n   *\n   * @param f\n   * @private\n   */\n  _onInit (f) {\n    this.initEvents.push(f);\n  }\n\n  /**\n   *\n   * @private\n   */\n  _fireInitEvents () {\n    this.initEvents.forEach((event) => {\n      event.call(this);\n    });\n  }\n\n  _resizeCanvas () {\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n\n    /**\n     * Your drawings need to be inside this function otherwise they will be reset when\n     * you resize the browser window and the canvas goes will be cleared.\n     */\n    // drawStuff();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/GameLoop.js","export function onReady(cb) {\n  if (document.readyState === \"complete\") {\n    cb(...arguments);\n  } else {\n    const prevORSC = document.onreadystatechange;  //save previous event\n    document.onreadystatechange = function () {\n      if (typeof(prevORSC) === \"function\"){\n        prevORSC();\n      }\n      if (document.readyState === \"complete\") {\n        cb(...arguments);\n      }\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/util/OnReady.js","export default class Clear {\n\n  constructor(color) {\n    this.color = color || null;\n  }\n\n  draw (context) {\n    const width = context.canvas.width;\n    const height = context.canvas.height;\n\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    if (this.color === null){\n      context.clearRect(0, 0, width, height);\n    } else {\n      context.save();\n      context.fillStyle = this.color;\n      context.fillRect(0, 0, width, height);\n      context.restore();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/components/Clear.js","export default class StarField {\n\n  constructor() {\n    this.center = {x:0, y:0};\n    this.bounds = {x:0, y:0};\n    this.particles = [];\n    this.particleCount = 200;\n    this.color = \"white\";\n    this.clearing = true;\n    this.spawnRadius = 10;\n  }\n\n  draw (context) {\n\n    if (this.clearing) {\n      context.fillStyle = \"rgba(0, 0, 10, 0.1)\";\n      context.fillRect(0, 0, 2 * this.center.x, 2 * this.center.y);\n    }\n\n    context.fillStyle = this.color;\n\n    this.particles.forEach((particle) => {\n      context.fillRect(\n        particle.x - 1,\n        particle.y - 1,\n        2, 2);\n    });\n  }\n\n  update (context) {\n\n    const bounds = {\n      x: context.canvas.width,\n      y: context.canvas.height\n    };\n\n    const center = {\n      x: bounds.x / 2,\n      y: bounds.y / 2\n    };\n\n    while (this.particles.length < this.particleCount){\n      this.particles.push({\n        x: 2 * this.spawnRadius * Math.random() - this.spawnRadius + center.x,\n        y: 2 * this.spawnRadius * Math.random() - this.spawnRadius + center.y\n      });\n    }\n\n    this.particles.forEach((particle, i) => {\n      particle.x += (particle.x - center.x) * 0.02;\n      particle.y += (particle.y - center.y) * 0.02;\n\n      if (particle.x < 0 ||\n          particle.x > bounds.x ||\n          particle.y < 0 ||\n          particle.y > bounds.y\n      )\n      {\n        this.particles.splice(i, 1);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/components/sample/StarField.js","import RegistryItem from \"./RegistryItem\";\n\nexport default class Manager {\n\n  constructor () {\n    this.registry = {};\n    this.awaiting = {};\n    this.assets = {};\n    this.components = [];\n  }\n\n  /**\n   * get\n   *\n   * @param key\n   * @returns {*}\n   */\n  get (key) {\n    if (this.registry.hasOwnProperty(key)){\n      return this.registry[key].obj;\n    }\n  }\n\n  /**\n   * add\n   *\n   * @param key\n   * @param obj\n   */\n  add (key, obj) {\n    this.registry[key] = new RegistryItem(key, obj);\n  }\n\n  /**\n   * addAsset\n   *\n   * @param key\n   * @param asset\n   */\n  addAsset (key, asset) {\n    this.assets[key] = asset;\n  }\n\n  /**\n   * getAsset\n   *\n   * @param key\n   * @returns {*}\n   */\n  getAsset (key) {\n    if (this.assets.hasOwnProperty(key)){\n      return this.assets[key];\n    }\n    return null;\n  }\n\n  /**\n   * loadAssets\n   */\n  loadAssets () {\n    const assets = document.querySelectorAll('[data-gl-asset]');\n    assets.forEach((asset) => {\n      this.addAsset(asset.dataset.glAsset, asset);\n    });\n  }\n\n  /**\n   * update\n   *\n   * @param context\n   * @param timediff\n   * @param timestamp\n   */\n  update (context, timediff, timestamp) {\n    this.components.forEach((component) => {\n      component.update(context,timediff, timestamp);\n    });\n  };\n\n  /**\n   * addItem\n   *\n   * @param component\n   */\n  addItem (component) {\n    this.components.push(component);\n  };\n\n  /**\n   * await\n   *\n   * @param key\n   * @param callback\n   * @param context\n   */\n  await (key, callback, context) {\n    if (this.registry.hasOwnProperty(key)){\n      switch (this.registry[key].state){\n        case \"ready\":\n          callback.call(context, this.registry[key].obj);\n          break;\n        default :\n          this.awaiting[key] = {context:context, callback:callback};\n          break;\n      }\n    }\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/Manager.js","/* global manager, GameLoop */\nimport { MIN_VOLUME } from \"../../Constants\";\nimport { GameException } from \"../../Exceptions\";\nimport AudioUnit from \"./AudioUnit\";\n\nexport default class GLAudio {\n\n  constructor () {\n    this.context = new AudioContext();\n    this.master = this.context.createGain();\n    this.sounds = this.context.createGain();\n    this.music = this.context.createGain();\n\n    this.sounds.connect(this.master);\n    this.music.connect(this.master);\n    this.master.connect(this.context.destination);\n  }\n  /**\n   * at\n   *\n   * @param offset\n   * @returns {*}\n   */\n  at (offset) {\n    if (typeof(offset) === \"undefined\") {\n      offset = 0;\n    }\n    return (this.getContext().currentTime + offset);\n  }\n\n  /**\n   * getMasterVolume\n   */\n  getMasterVolume () {\n    return this.master.gain.value;\n  }\n\n  /**\n   * setMasterVolume\n   *\n   * @param vol\n   */\n  setMasterVolume (vol) {\n    vol = Math.max(vol, MIN_VOLUME);\n    vol = Math.min(vol, 1);\n    const t = this.at();\n    this.master.gain.setValueAtTime(this.master.gain.value, t);\n    this.master.gain.exponentialRampToValueAtTime(vol, t + 0.032);\n  }\n\n  /**\n   * getSoundsVolume\n   */\n  getSoundsVolume () {\n    return this.sounds.gain.value;\n  }\n\n  /**\n   * setSoundsVolume\n   *\n   * @param vol\n   */\n  setSoundsVolume (vol) {\n    vol = Math.max(vol, MIN_VOLUME);\n    vol = Math.min(vol, 1);\n    const t = this.at();\n    this.sounds.gain.setValueAtTime(this.sounds.gain.value, t);\n    this.sounds.gain.exponentialRampToValueAtTime(vol, t + 0.032);\n  }\n\n  /**\n   * getMusicVolume\n   */\n  getMusicVolume () {\n    return this.music.gain.value;\n  }\n\n  /**\n   *\n   * @param vol\n   */\n  setMusicVolume (vol) {\n    vol = Math.max(vol, MIN_VOLUME);\n    vol = Math.min(vol, 1);\n    const t = this.at();\n    this.music.gain.setValueAtTime(this.music.gain.value, t);\n    this.music.gain.exponentialRampToValueAtTime(vol, t + 0.032);\n  }\n\n  _makeUnit(type, options, node) {\n    const vol = GameLoop.ctx.createGain();\n    const unit = new AudioUnit(node, vol, type);\n    for (const p in options) {\n      unit.set(p, options[p]);\n    }\n    return unit;\n  }\n\n  create (name, options) {\n    if (typeof(options) === \"undefined\") {\n      options = {};\n    }\n\n    let node = null;\n    let result = null;\n\n    switch (name) {\n      case \"oscillator\":\n        node = this.context.createOscillator();\n        result = this._makeUnit(null, options, node);\n        node.start();\n        break;\n      case \"music\":\n      case \"sound\":\n        if (options.hasOwnProperty(\"media\")){\n          const newMedia = options.media.cloneNode();\n          node = this.context.createMediaElementSource(newMedia);\n          result = this.makeUnit(name, node);\n          result.on = () => {\n            this.playing = true;\n            newMedia.play();\n            this.setVolume(this.currentVolume);\n          };\n          result.off = () => {\n            this.playing = false;\n            newMedia.pause();\n            this.setVolume(0, false);\n          };\n        }\n        else if (options.hasOwnProperty(\"asset\")) {\n          options.media = manager.getAsset(options.asset);\n          result = this.create(name, options);\n        }\n        else if (options.hasOwnProperty(\"data\")) {\n          let node = this.context.createBufferSource();\n          node.buffer = options.data;\n          result = this.makeUnit(name, node);\n          result.progress = 0;\n          result.startTime = 0;\n\n          result.on = () => {\n            if (this.playing) {\n              return;\n            }\n            this.playing = true;\n            node.start(0, this.progress);\n            this.startTime = this.at();\n            this.setVolume(this.currentVolume);\n          };\n\n          const onend = () => {\n            if (result.playing) {\n              result.off();\n              result.progress = 0;\n            }\n          };\n\n          result.off = () => {\n            if (!this.playing) {\n              return;\n            }\n\n            node.stop();\n            this.playing = false;\n            this.progress += (this.at() - this.startTime);\n            this.setVolume(0, false);\n            const newnode = this.context.createBufferSource();\n            newnode.buffer = node.buffer;\n            node = newnode;\n            node.connect(this.gain);\n            node.onended = onend;\n          };\n\n          node.onended = onend;\n        }\n        else {\n          throw new GameException(\"Can't create music instance.\");\n        }\n        break;\n      default:\n        break;\n    }\n    return result;\n  }\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/audio/GLAudio.js","/* global manager */\n\nexport default class SoundTrack {\n  constructor (glaudio) {\n    this.nowPlaying = \"\";\n    this.activeUnit = null;\n    this.glaudio = glaudio;\n  }\n\n  play (name){\n    const item = manager.getAsset(name);\n    if (item) {\n      if (this.activeUnit) {\n        this.activeUnit.off();\n      }\n      const track = this.glaudio.create(\"music\", { media: item });\n      this.nowPlaying = item.title;\n      track.on();\n      this.activeUnit = track;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/base/audio/SoundTrack.js","import { GameException } from \"../../Exceptions\";\nimport Bullet from \"./Bullet\";\nimport Sprite from \"../../base/sprites/Sprite\";\n\nexport default class Shooter extends Sprite {\n  constructor () {\n    super();\n\n    this.PERIOD = 1000;\n    this.speed = 200;\n    this.width = 0;\n    this.height = 0;\n    this.input = {\n      getX: () => { return 0; },\n      getY: () => { return 0; },\n      isShooting: () => { return false; }\n    };\n    this.shotPeriod = 0.5;\n    this.bulletList = [\n      new Bullet(),\n      new Bullet(),\n      new Bullet()\n    ];\n    this.shotTimer = 0;\n    this.position = {\n      x: 0,\n      y: 0\n    };\n\n    this.bulletList.forEach((bullet) => {\n      bullet.readyLoadImageId(\"ship\");\n    });\n  }\n\n  setInput (input) {\n    if (typeof(input.getX) === \"function\" &&\n        typeof(input.getY) === \"function\" &&\n        typeof(input.isShooting) === \"function\"\n    ) {\n      this.input = input;\n    } else {\n      throw new GameException(\"invalid input module\", input);\n    }\n  }\n\n  update (context, timediff) {\n    if (timediff < -1) {\n      return;\n    }\n    this.updatePosition.call(this, context, timediff);\n    this.updateBullets.call(this, context, timediff);\n  }\n\n  updatePosition (context, timediff) {\n    //change position\n    const speed = this.speed * timediff / this.PERIOD;\n    const v = {\n      x: this.input.getX() * speed,\n      y: this.input.getY() * speed\n    };\n    this.position.x += v.x;\n    this.position.y += v.y;\n\n    //clamp to screen\n    this.position.x = Math.max(this.width / 2, this.position.x);\n    this.position.x = Math.min(this.width / -2 + context.canvas.width, this.position.x);\n    this.position.y = Math.max(this.height / 2, this.position.y);\n    this.position.y = Math.min(this.height / -2 + context.canvas.height, this.position.y);\n  }\n\n  getNextBullet () {\n    this.bulletList.forEach((bullet) => {\n      if (!bullet.isActive()) {\n        return bullet;\n      }\n    });\n    return null;\n  }\n\n  updateBullets (context, timediff){\n    if (this.input.isShooting()) {\n      if (this.shotTimer > 0) {\n        this.shotTimer -= (timediff / this.PERIOD);\n      }\n      else {\n        const next = this.getNextBullet();\n        if (next !== null) {\n          next.shoot(this.position, { x: 1, y: 0 });\n          this.shotTimer = this.shotPeriod();\n        }\n      }\n    }\n\n    this.bulletList.forEach((bullet) => {\n      if (bullet.isActive()) {\n        bullet.update(timediff);\n      }\n    });\n  }\n\n  draw (context, timediff, timestamp) {\n    super.draw(context, timediff, timestamp);\n\n    this.bulletList.forEach((bullet) => {\n      if (bullet.isActive()) {\n        bullet.draw(context, timediff, timestamp);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/gameloop/components/sample/Shooter.js","/**\n * http://www.network-science.de/ascii/\n *\n * Gothic\n */\n\nconst logo = `\n                             .__                        \n   _________    _____   ____ |  |   ____   ____ ______  \n  / ___\\\\__  \\\\  /     \\\\_/ __ \\\\|  |  /  _ \\\\ /  _ \\\\\\\\____ \\\\ \n / /_/  > __ \\\\|  Y Y  \\\\  ___/|  |_(  <_> |  <_> )  |_> >\n \\\\___  (____  /__|_|  /\\\\___  >____/\\\\____/ \\\\____/|   __/ \n/_____/     \\\\/      \\\\/     \\\\/                   |__|\\n`;\n\nexport default logo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/logo.js"],"sourceRoot":""}